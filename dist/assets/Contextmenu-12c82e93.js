import{_ as t,o as e,c as n,a as o,d as i,h as l,i as r,r as s,j as a,k as c,b as f,w as u,e as d,n as p,f as m,v as g,g as h,I as y,T as w,l as x,m as v,F as b,p as R,q as _}from"./index-bbb0dc90.js";const T={name:"ArrowRightUp"},L={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},E=[o("path",{d:"M16.0037 9.41421L7.39712 18.0208L5.98291 16.6066L14.5895 8H7.00373V6H18.0037V17H16.0037V9.41421Z"},null,-1)];const V=t(T,[["render",function(t,o,i,l,r,s){return e(),n("svg",L,E)}]]);function k(t){return t.split("-")[1]}function C(t){return"y"===t?"height":"width"}function O(t){return t.split("-")[0]}function S(t){return["top","bottom"].includes(O(t))?"x":"y"}function D(t,e,n){let{reference:o,floating:i}=t;const l=o.x+o.width/2-i.width/2,r=o.y+o.height/2-i.height/2,s=S(e),a=C(s),c=o[a]/2-i[a]/2,f="x"===s;let u;switch(O(e)){case"top":u={x:l,y:o.y-i.height};break;case"bottom":u={x:l,y:o.y+o.height};break;case"right":u={x:o.x+o.width,y:r};break;case"left":u={x:o.x-i.width,y:r};break;default:u={x:o.x,y:o.y}}switch(k(e)){case"start":u[s]-=c*(n&&f?-1:1);break;case"end":u[s]+=c*(n&&f?-1:1)}return u}function P(t,e){return"function"==typeof t?t(e):t}function A(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function W(t,e){var n;void 0===e&&(e={});const{x:o,y:i,platform:l,rects:r,elements:s,strategy:a}=t,{boundary:c="clippingAncestors",rootBoundary:f="viewport",elementContext:u="floating",altBoundary:d=!1,padding:p=0}=P(e,t),m=function(t){return"number"!=typeof t?(e=t,{top:0,right:0,bottom:0,left:0,...e}):{top:t,right:t,bottom:t,left:t};var e}(p),g=s[d?"floating"===u?"reference":"floating":u],h=A(await l.getClippingRect({element:null==(n=await(null==l.isElement?void 0:l.isElement(g)))||n?g:g.contextElement||await(null==l.getDocumentElement?void 0:l.getDocumentElement(s.floating)),boundary:c,rootBoundary:f,strategy:a})),y="floating"===u?{...r.floating,x:o,y:i}:r.reference,w=await(null==l.getOffsetParent?void 0:l.getOffsetParent(s.floating)),x=await(null==l.isElement?void 0:l.isElement(w))&&await(null==l.getScale?void 0:l.getScale(w))||{x:1,y:1},v=A(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({rect:y,offsetParent:w,strategy:a}):y);return{top:(h.top-v.top+m.top)/x.y,bottom:(v.bottom-h.bottom+m.bottom)/x.y,left:(h.left-v.left+m.left)/x.x,right:(v.right-h.right+m.right)/x.x}}const H=Math.min,F=Math.max;function M(t,e,n){return F(t,H(e,n))}["top","right","bottom","left"].reduce(((t,e)=>t.concat(e,e+"-start",e+"-end")),[]);const j={left:"right",right:"left",bottom:"top",top:"bottom"};function B(t){return t.replace(/left|right|bottom|top/g,(t=>j[t]))}const I={start:"end",end:"start"};function N(t){return t.replace(/start|end/g,(t=>I[t]))}const U=function(t){return void 0===t&&(t={}),{name:"flip",options:t,async fn(e){var n;const{placement:o,middlewareData:i,rects:l,initialPlacement:r,platform:s,elements:a}=e,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:u,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=P(t,e),h=O(o),y=O(r)===r,w=await(null==s.isRTL?void 0:s.isRTL(a.floating)),x=u||(y||!m?[B(r)]:function(t){const e=B(t);return[N(t),e,N(e)]}(r));u||"none"===p||x.push(...function(t,e,n,o){const i=k(t);let l=function(t,e,n){const o=["left","right"],i=["right","left"],l=["top","bottom"],r=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:o:e?o:i;case"left":case"right":return e?l:r;default:return[]}}(O(t),"start"===n,o);return i&&(l=l.map((t=>t+"-"+i)),e&&(l=l.concat(l.map(N)))),l}(r,m,p,w));const v=[r,...x],b=await W(e,g),R=[];let _=(null==(n=i.flip)?void 0:n.overflows)||[];if(c&&R.push(b[h]),f){const{main:t,cross:e}=function(t,e,n){void 0===n&&(n=!1);const o=k(t),i=S(t),l=C(i);let r="x"===i?o===(n?"end":"start")?"right":"left":"start"===o?"bottom":"top";return e.reference[l]>e.floating[l]&&(r=B(r)),{main:r,cross:B(r)}}(o,l,w);R.push(b[t],b[e])}if(_=[..._,{placement:o,overflows:R}],!R.every((t=>t<=0))){var T,L;const t=((null==(T=i.flip)?void 0:T.index)||0)+1,e=v[t];if(e)return{data:{index:t,overflows:_},reset:{placement:e}};let n=null==(L=_.filter((t=>t.overflows[0]<=0)).sort(((t,e)=>t.overflows[1]-e.overflows[1]))[0])?void 0:L.placement;if(!n)switch(d){case"bestFit":{var E;const t=null==(E=_.map((t=>[t.placement,t.overflows.filter((t=>t>0)).reduce(((t,e)=>t+e),0)])).sort(((t,e)=>t[1]-e[1]))[0])?void 0:E[0];t&&(n=t);break}case"initialPlacement":n=r}if(o!==n)return{reset:{placement:n}}}return{}}}};function $(t){var e;return(null==t||null==(e=t.ownerDocument)?void 0:e.defaultView)||window}function q(t){return $(t).getComputedStyle(t)}function X(t){return t instanceof $(t).Node}function Y(t){return X(t)?(t.nodeName||"").toLowerCase():"#document"}function z(t){return t instanceof HTMLElement||t instanceof $(t).HTMLElement}function Z(t){return"undefined"!=typeof ShadowRoot&&(t instanceof $(t).ShadowRoot||t instanceof ShadowRoot)}function G(t){const{overflow:e,overflowX:n,overflowY:o,display:i}=q(t);return/auto|scroll|overlay|hidden|clip/.test(e+o+n)&&!["inline","contents"].includes(i)}function J(t){return["table","td","th"].includes(Y(t))}function K(t){const e=Q(),n=q(t);return"none"!==n.transform||"none"!==n.perspective||!!n.containerType&&"normal"!==n.containerType||!e&&!!n.backdropFilter&&"none"!==n.backdropFilter||!e&&!!n.filter&&"none"!==n.filter||["transform","perspective","filter"].some((t=>(n.willChange||"").includes(t)))||["paint","layout","strict","content"].some((t=>(n.contain||"").includes(t)))}function Q(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function tt(t){return["html","body","#document"].includes(Y(t))}const et=Math.min,nt=Math.max,ot=Math.round,it=t=>({x:t,y:t});function lt(t){const e=q(t);let n=parseFloat(e.width)||0,o=parseFloat(e.height)||0;const i=z(t),l=i?t.offsetWidth:n,r=i?t.offsetHeight:o,s=ot(n)!==l||ot(o)!==r;return s&&(n=l,o=r),{width:n,height:o,$:s}}function rt(t){return t instanceof Element||t instanceof $(t).Element}function st(t){return rt(t)?t:t.contextElement}function at(t){const e=st(t);if(!z(e))return it(1);const n=e.getBoundingClientRect(),{width:o,height:i,$:l}=lt(e);let r=(l?ot(n.width):n.width)/o,s=(l?ot(n.height):n.height)/i;return r&&Number.isFinite(r)||(r=1),s&&Number.isFinite(s)||(s=1),{x:r,y:s}}const ct=it(0);function ft(t){const e=$(t);return Q()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:ct}function ut(t,e,n,o){void 0===e&&(e=!1),void 0===n&&(n=!1);const i=t.getBoundingClientRect(),l=st(t);let r=it(1);e&&(o?rt(o)&&(r=at(o)):r=at(t));const s=(a=l,void 0===(c=n)&&(c=!1),!(f=o)||c&&f!==$(a)||!c?it(0):ft(l));var a,c,f;let u=(i.left+s.x)/r.x,d=(i.top+s.y)/r.y,p=i.width/r.x,m=i.height/r.y;if(l){const t=$(l),e=o&&rt(o)?$(o):o;let n=t.frameElement;for(;n&&o&&e!==t;){const t=at(n),e=n.getBoundingClientRect(),o=getComputedStyle(n),i=e.left+(n.clientLeft+parseFloat(o.paddingLeft))*t.x,l=e.top+(n.clientTop+parseFloat(o.paddingTop))*t.y;u*=t.x,d*=t.y,p*=t.x,m*=t.y,u+=i,d+=l,n=$(n).frameElement}}return A({width:p,height:m,x:u,y:d})}function dt(t){return rt(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function pt(t){var e;return null==(e=(X(t)?t.ownerDocument:t.document)||window.document)?void 0:e.documentElement}function mt(t){return ut(pt(t)).left+dt(t).scrollLeft}function gt(t){if("html"===Y(t))return t;const e=t.assignedSlot||t.parentNode||Z(t)&&t.host||pt(t);return Z(e)?e.host:e}function ht(t){const e=gt(t);return tt(e)?t.ownerDocument?t.ownerDocument.body:t.body:z(e)&&G(e)?e:ht(e)}function yt(t,e){var n;void 0===e&&(e=[]);const o=ht(t),i=o===(null==(n=t.ownerDocument)?void 0:n.body),l=$(o);return i?e.concat(l,l.visualViewport||[],G(o)?o:[]):e.concat(o,yt(o))}function wt(t,e,n){let o;if("viewport"===e)o=function(t,e){const n=$(t),o=pt(t),i=n.visualViewport;let l=o.clientWidth,r=o.clientHeight,s=0,a=0;if(i){l=i.width,r=i.height;const t=Q();(!t||t&&"fixed"===e)&&(s=i.offsetLeft,a=i.offsetTop)}return{width:l,height:r,x:s,y:a}}(t,n);else if("document"===e)o=function(t){const e=pt(t),n=dt(t),o=t.ownerDocument.body,i=nt(e.scrollWidth,e.clientWidth,o.scrollWidth,o.clientWidth),l=nt(e.scrollHeight,e.clientHeight,o.scrollHeight,o.clientHeight);let r=-n.scrollLeft+mt(t);const s=-n.scrollTop;return"rtl"===q(o).direction&&(r+=nt(e.clientWidth,o.clientWidth)-i),{width:i,height:l,x:r,y:s}}(pt(t));else if(rt(e))o=function(t,e){const n=ut(t,!0,"fixed"===e),o=n.top+t.clientTop,i=n.left+t.clientLeft,l=z(t)?at(t):it(1);return{width:t.clientWidth*l.x,height:t.clientHeight*l.y,x:i*l.x,y:o*l.y}}(e,n);else{const n=ft(t);o={...e,x:e.x-n.x,y:e.y-n.y}}return A(o)}function xt(t,e){const n=gt(t);return!(n===e||!rt(n)||tt(n))&&("fixed"===q(n).position||xt(n,e))}function vt(t,e,n){const o=z(e),i=pt(e),l="fixed"===n,r=ut(t,!0,l,e);let s={scrollLeft:0,scrollTop:0};const a=it(0);if(o||!o&&!l)if(("body"!==Y(e)||G(i))&&(s=dt(e)),z(e)){const t=ut(e,!0,l,e);a.x=t.x+e.clientLeft,a.y=t.y+e.clientTop}else i&&(a.x=mt(i));return{x:r.left+s.scrollLeft-a.x,y:r.top+s.scrollTop-a.y,width:r.width,height:r.height}}function bt(t,e){return z(t)&&"fixed"!==q(t).position?e?e(t):t.offsetParent:null}function Rt(t,e){const n=$(t);if(!z(t))return n;let o=bt(t,e);for(;o&&J(o)&&"static"===q(o).position;)o=bt(o,e);return o&&("html"===Y(o)||"body"===Y(o)&&"static"===q(o).position&&!K(o))?n:o||function(t){let e=gt(t);for(;z(e)&&!tt(e);){if(K(e))return e;e=gt(e)}return null}(t)||n}const _t={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:n,strategy:o}=t;const i=z(n),l=pt(n);if(n===l)return e;let r={scrollLeft:0,scrollTop:0},s=it(1);const a=it(0);if((i||!i&&"fixed"!==o)&&(("body"!==Y(n)||G(l))&&(r=dt(n)),z(n))){const t=ut(n);s=at(n),a.x=t.x+n.clientLeft,a.y=t.y+n.clientTop}return{width:e.width*s.x,height:e.height*s.y,x:e.x*s.x-r.scrollLeft*s.x+a.x,y:e.y*s.y-r.scrollTop*s.y+a.y}},getDocumentElement:pt,getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:o,strategy:i}=t;const l=[..."clippingAncestors"===n?function(t,e){const n=e.get(t);if(n)return n;let o=yt(t).filter((t=>rt(t)&&"body"!==Y(t))),i=null;const l="fixed"===q(t).position;let r=l?gt(t):t;for(;rt(r)&&!tt(r);){const e=q(r),n=K(r);n||"fixed"!==e.position||(i=null),(l?!n&&!i:!n&&"static"===e.position&&i&&["absolute","fixed"].includes(i.position)||G(r)&&!n&&xt(t,r))?o=o.filter((t=>t!==r)):i=e,r=gt(r)}return e.set(t,o),o}(e,this._c):[].concat(n),o],r=l[0],s=l.reduce(((t,n)=>{const o=wt(e,n,i);return t.top=nt(o.top,t.top),t.right=et(o.right,t.right),t.bottom=et(o.bottom,t.bottom),t.left=nt(o.left,t.left),t}),wt(e,r,i));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},getOffsetParent:Rt,getElementRects:async function(t){let{reference:e,floating:n,strategy:o}=t;const i=this.getOffsetParent||Rt,l=this.getDimensions;return{reference:vt(e,await i(n),o),floating:{x:0,y:0,...await l(n)}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){return lt(t)},getScale:at,isElement:rt,isRTL:function(t){return"rtl"===getComputedStyle(t).direction}},Tt=(t,e,n)=>{const o=new Map,i={platform:_t,...n},l={...i.platform,_c:o};return(async(t,e,n)=>{const{placement:o="bottom",strategy:i="absolute",middleware:l=[],platform:r}=n,s=l.filter(Boolean),a=await(null==r.isRTL?void 0:r.isRTL(e));let c=await r.getElementRects({reference:t,floating:e,strategy:i}),{x:f,y:u}=D(c,o,a),d=o,p={},m=0;for(let g=0;g<s.length;g++){const{name:n,fn:l}=s[g],{x:h,y:y,data:w,reset:x}=await l({x:f,y:u,initialPlacement:o,placement:d,strategy:i,middlewareData:p,rects:c,platform:r,elements:{reference:t,floating:e}});f=null!=h?h:f,u=null!=y?y:u,p={...p,[n]:{...p[n],...w}},x&&m<=50&&(m++,"object"==typeof x&&(x.placement&&(d=x.placement),x.rects&&(c=!0===x.rects?await r.getElementRects({reference:t,floating:e,strategy:i}):x.rects),({x:f,y:u}=D(c,d,a))),g=-1)}return{x:f,y:u,placement:d,strategy:i,middlewareData:p}})(t,e,{...i,platform:l})},Lt={class:"separator"},Et={class:"separator"},Vt=(t=>(R("data-v-3b2407cf"),t=t(),_(),t))((()=>o("span",null,"问题反馈",-1))),kt=t(i({__name:"Contextmenu",emits:["delWidget","editWidget","close"],setup(t,{expose:i,emit:R}){const _=l((()=>r((()=>import("./About-b4cbaf4f.js")),["assets/About-b4cbaf4f.js","assets/index-bbb0dc90.js","assets/index-d33f3213.css","assets/About-fada4958.css"]))),T=l((()=>r((()=>import("./index-868ac11a.js")),["assets/index-868ac11a.js","assets/index-bbb0dc90.js","assets/index-d33f3213.css","assets/index-ab78cf6f.css"]))),L=l((()=>r((()=>import("./index-e7eac968.js")),["assets/index-e7eac968.js","assets/index-bbb0dc90.js","assets/index-d33f3213.css","assets/index-bbd1ca01.css"]))),E=l((()=>r((()=>import("./WidgetList-ba4a197d.js")),["assets/WidgetList-ba4a197d.js","assets/index-bbb0dc90.js","assets/index-d33f3213.css","assets/WidgetList-0be13b0b.css"]))),k=s(""),C=s({}),D=s(),A=s(!1),H=()=>{A.value=!1,window.open("https://support.qq.com/products/592621/")};a(D,(()=>{A.value=!1,R("close")}));i({show:(t,e)=>{k.value=t,(async t=>{A.value=!0;const e={widget:{placement:"right-start",transformOrigin:"0% 0%"},desktop:{placement:"right-start",transformOrigin:"0% 0%"},settings:{placement:"bottom-end",transformOrigin:"90% 0%"}}[k.value],{x:n,y:o}=await Tt(t,D.value,{placement:e.placement,middleware:[U(),(void 0===i&&(i={}),{name:"shift",options:i,async fn(t){const{x:e,y:n,placement:o}=t,{mainAxis:l=!0,crossAxis:r=!1,limiter:s={fn:t=>{let{x:e,y:n}=t;return{x:e,y:n}}},...a}=P(i,t),c={x:e,y:n},f=await W(t,a),u=S(O(o)),d=function(t){return"x"===t?"y":"x"}(u);let p=c[u],m=c[d];if(l){const t="y"===u?"bottom":"right";p=M(p+f["y"===u?"top":"left"],p,p-f[t])}if(r){const t="y"===d?"bottom":"right";m=M(m+f["y"===d?"top":"left"],m,m-f[t])}const g=s.fn({...t,[u]:p,[d]:m});return{...g,data:{x:g.x-e,y:g.y-n}}}})],strategy:"fixed"});var i;C.value={left:`${n}px`,top:`${o}px`,transformOrigin:e.transformOrigin}})(e)}});const F=(t,e)=>{A.value=!1,R(t,e)},j=s(!1),B=s(!1),I=s(!1),N=s(!1),$=t=>{A.value=!1;({about:j,settings:B,wallpaper:I,addWidget:N})[t].value=!0};return(t,i)=>(e(),n(b,null,[(e(),c(x,{to:"body"},[f(w,{name:"fade"},{default:u((()=>[d(o("ul",{ref_key:"floatingRef",ref:D,style:p(m(C))},[d(o("li",{class:"item",onClick:i[0]||(i[0]=t=>$("settings"))}," 常规设置 ",512),[[g,"settings"===m(k)||"desktop"===m(k)]]),d(o("li",{class:"item",onClick:i[1]||(i[1]=t=>$("wallpaper"))}," 壁纸偏好 ",512),[[g,"settings"===m(k)||"desktop"===m(k)]]),d(o("li",Lt,null,512),[[g,"settings"===m(k)||"desktop"===m(k)]]),o("li",{class:"item",onClick:i[2]||(i[2]=t=>$("addWidget"))},"添加小组件"),o("li",{class:"item",onClick:i[3]||(i[3]=t=>F("editWidget"))},"编辑小组件"),d(o("li",{class:"item delete",onClick:i[4]||(i[4]=t=>F("delWidget"))}," 删除此小组件 ",512),[[g,"widget"===m(k)]]),d(o("li",Et,null,512),[[g,"settings"===m(k)]]),d(o("li",{class:"item",onClick:H},[Vt,h(),f(y,{color:"rgba(60, 60, 60, .33)"},{default:u((()=>[f(m(V))])),_:1})],512),[[g,"settings"===m(k)]]),d(o("li",{class:"item",onClick:i[5]||(i[5]=t=>$("about"))}," 关于 ",512),[[g,"settings"===m(k)]])],4),[[g,m(A)]])])),_:1})])),f(m(_),{modelValue:m(j),"onUpdate:modelValue":i[6]||(i[6]=t=>v(j)?j.value=t:null)},null,8,["modelValue"]),f(m(T),{modelValue:m(B),"onUpdate:modelValue":i[7]||(i[7]=t=>v(B)?B.value=t:null)},null,8,["modelValue"]),f(m(L),{modelValue:m(I),"onUpdate:modelValue":i[8]||(i[8]=t=>v(I)?I.value=t:null)},null,8,["modelValue"]),f(m(E),{modelValue:m(N),"onUpdate:modelValue":i[9]||(i[9]=t=>v(N)?N.value=t:null)},null,8,["modelValue"])],64))}}),[["__scopeId","data-v-3b2407cf"]]),Ct=Object.freeze(Object.defineProperty({__proto__:null,default:kt},Symbol.toStringTag,{value:"Module"}));export{V as A,Ct as C};
